<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
 * WYMeditor : what you see is What You Mean web-based editor
 * Copyright (C) 2006 H.O.net - http://www.honet.be/
 * Dual licensed under the MIT (MIT-license.txt)
 * and GPL (GPL-license.txt) licenses.
 *
 * For further information visit:
 * 		http://www.wymeditor.org/
 *
 * File Name:
 *		editor.htm
 *		Main editor container.
 *		See the documentation for more info.
 *
 * File Authors:
 * 		Jean-François Hovinne (jf.hovinne@wymeditor.org)
 *		Daniel Reszka (d.reszka@wym-editor.org)
-->

<html>
<head>
<title>HTML Edit</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="skins/default/screen.css" />
<style type="text/css" media="screen">
  .wym_skin_default .wym_iframe iframe      { height: 500px; }
</style>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jquery.wymeditor.js"></script>
<script type="text/javascript" src="plugins/hovertools/jquery.wymeditor.hovertools.js"></script>
<script type="text/javascript" src="plugins/tidy/jquery.wymeditor.tidy.js"></script>

<script type="text/javascript">

var $j = jQuery.noConflict();
var wed;

$j(function() {

    $j('.wymeditor').wymeditor({

      //options

      //classes panel
      classesItems: [
        {'name': 'date', 'title': 'PARA: Date', 'expr': 'p'},
        {'name': 'hidden-note', 'title': 'PARA: Hidden note',
         'expr': 'p[@class!="important"]'},
        {'name': 'important', 'title': 'PARA: Important',
         'expr': 'p[@class!="hidden-note"]'},
        {'name': 'border', 'title': 'IMG: Border', 'expr': 'img'},
        {'name': 'special', 'title': 'LIST: Special', 'expr': 'ul, ol'}
      ],

      //editor css values for visual feedback
      editorStyles: [
        {'name': '.hidden-note',
         'css': 'color: #999; border: 2px solid #ccc;'},
        {'name': '.border', 'css': 'border: 4px solid #ccc;'},
        {'name': '.date',
         'css': 'background-color: #ff9; border: 2px solid #ee9;'},
        {'name': '.important',
         'css': 'color: red; font-weight: bold; border: 2px solid red;'},
        {'name': '.special',
         'css': 'background-color: #fc9; border: 2px solid red;'}
      ],

      //dialogs css values
      dialogStyles: [
        {'name': '.hidden-note',
         'css': 'display: none;'},
        {'name': '.border', 'css': 'border: 1px solid #ccc;'},
        {'name': '.date',
         'css': 'color: #ccf;'},
        {'name': '.important',
         'css': 'color: red; font-weight: bold;'},
        {'name': '.special',
         'css': 'color: green;'}
      ],

      //function called when WYMeditor instance is ready
      //wym is the WYMeditor instance
      postInit: function(wym) {

        wed = wym;
        //set the editor's HTML value
        wym.html(opener.document.getElementById(opener.HTMLeditTextAreaId).value);
        // document.getElementById('editor').innerHTML=opener.document.getElementById(opener.HTMLeditTextAreaId).value

        //set the status bar value
        wym.status('&nbsp;');

//        //activate 'tidy' plugin
//        //which cleans up the HTML
//        var wymtidy = wym.tidy({
//
//          sUrl:          "plugins/tidy/tidy.php",
//          sButtonHtml:   "<li class='wym_tools_tidy'>"
//                       + "<a name='CleanUp' href='#'"
//                       + " style='background-image:"
//                       + " url(wymeditor/tags/0.3-b1/wymeditor/plugins/tidy/wand.png)'>"
//                       + "Clean up HTML"
//                       + "<\/a><\/li>"
//        });
//        wymtidy.init();

        //activate 'hovertools' plugin
        //which gives more feedback to the user
        wym.hovertools();

      },

      //function called when dialog is ready
      //wym is the WYMeditor instance
      //wdw is the dialog's window
      postInitDialog: function(wym,wdw) {

        var body = wdw.document.body;

        //add a select box populated with predefined values to the dialog

        var sSelectLink = "<div class='row row-indent'>"
        + "<select class='wym_select_link'>"
        + "<option selected value='WYMeditor http://www.wymeditor.org/'>"
        + "WYMeditor<\/option>"
        + "<option value='SourceForge http://www.sourceforge.net/'>"
        + "SourceForge<\/option>"
        + "<option value='GNU http://www.gnu.org/'>"
        + "GNU<\/option>"
        + "<\/select>"
        + "<input class='wym_choose' type='button'"
        + " value='{Choose}' />"
        + "<\/div>";

        $j(body)
          .filter('.wym_dialog_link').find('fieldset').eq(0)
          .prepend(wym.replaceStrings(sSelectLink));

        $j(body)
          .find('.wym_choose')
          .click(function() {

            var sVal = $j(body).find('.wym_select_link').val();

            $j(body)
              .find('.wym_href')
              .val(sVal.substring(sVal.lastIndexOf(' ') + 1));
            $j(body)
              .find('.wym_title')
              .val(sVal.substr(0, sVal.lastIndexOf(' ')));
          });
      }
    });

/*
    $j('.wymsubmit').click(function() {
      debugger;
      //alert($j(this).siblings('.wymeditor').val());

    });
*/
});

</script>

</head>

<body>
  <form method="post" action="">
  <textarea class="wymeditor"></textarea>
  <!--
  <input type="submit" class="wymupdate" value="click" />
  -->
  <div style="padding:5px;">
    <input type="submit" value="OK" onclick="opener.document.getElementById(opener.HTMLeditTextAreaId).value=wed.html();opener.win.close();return false;"><input type="submit" value="Cancel" onclick="opener.win.close();;return false;">
  </div>
  </form>

</body>
</html>
